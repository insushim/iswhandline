import { NextRequest, NextResponse } from 'next/server';
import { GoogleGenerativeAI } from '@google/generative-ai';
import { PALMISTRY_DATABASE } from '@/lib/palmistry-database';

// Vercel Serverless - 60ì´ˆ íƒ€ì„ì•„ì›ƒ
export const maxDuration = 60;

/**
 * êµì°¨ê²€ì¦ëœ ì†ê¸ˆ ì§€ì‹ ë°ì´í„°ë² ì´ìŠ¤ (10ê°œ ì´ìƒ ì¶œì²˜)
 * ì¶œì²˜: William G. Benham, Cheiro, Noel Jaquin, Charlotte Wolff,
 *       ë§ˆì˜ìƒë²•, ìˆ˜ìƒí•™ëŒ€ì „, Samudrik Shastra, í”¼ë¶€ë¬¸ì–‘í•™ ì—°êµ¬ ë“±
 */
// ì „ì²´ ì†ê¸ˆ ë°ì´í„°ë² ì´ìŠ¤ë¥¼ AIì—ê²Œ ì£¼ì… (4000ì¤„+ ì „ì²´ DB)
const VERIFIED_PALMISTRY_KNOWLEDGE = PALMISTRY_DATABASE;

// ì „ë¬¸ê°€ê¸‰ ì†ê¸ˆ ë¶„ì„ í”„ë¡¬í”„íŠ¸ (êµì°¨ê²€ì¦ëœ DB ì§€ì‹ ì£¼ì…)
const PALM_ANALYSIS_PROMPT = `ë‹¹ì‹ ì€ 50ë…„ ê²½ë ¥ì˜ ì„¸ê³„ì ì¸ ì†ê¸ˆ ë¶„ì„ ì „ë¬¸ê°€ì…ë‹ˆë‹¤.
ì„œì–‘ ì†ê¸ˆí•™(Cheiro, William Benham, Noel Jaquin)ê³¼ ë™ì–‘ì˜ ë§ˆì˜ìƒë²•, ì¸ë„ Samudrik Shastraë¥¼ ëª¨ë‘ í†µë‹¬í–ˆìŠµë‹ˆë‹¤.
í”¼ë¶€ë¬¸ì–‘í•™(Dermatoglyphics) ì—°êµ¬ì™€ Charlotte Wolffì˜ ì˜í•™ì  ì†ê¸ˆ ì—°êµ¬ë„ ìˆ™ì§€í•˜ê³  ìˆìŠµë‹ˆë‹¤.

â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—
â•‘ ğŸ“š 10ê°œ ì´ìƒ ì¶œì²˜ì—ì„œ êµì°¨ê²€ì¦ëœ ì†ê¸ˆ ì§€ì‹ ë°ì´í„°ë² ì´ìŠ¤ (ë°˜ë“œì‹œ ì°¸ì¡°!)      â•‘
â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ì•„ë˜ ë°ì´í„°ë² ì´ìŠ¤ì˜ ëª¨ë“  ì§€ì‹ì„ í™œìš©í•˜ì—¬ ì†ê¸ˆì„ ë¶„ì„í•˜ì„¸ìš”.
í•´ì„ ì‹œ ë°˜ë“œì‹œ ì´ DBì˜ ë‚´ìš©ì„ ê·¼ê±°ë¡œ ì‚¬ìš©í•˜ì„¸ìš”.

${JSON.stringify(VERIFIED_PALMISTRY_KNOWLEDGE, null, 2)}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“‹ ì „ë¬¸ê°€ ìˆ˜ì¤€ ì†ê¸ˆ ìƒì„¸ ë¶„ì„ ê°€ì´ë“œ
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€ë¶„ì„ ìˆœì„œã€‘
1ë‹¨ê³„: ì† í˜•íƒœ(4ì›ì†Œ) ë¶„ì„ â†’ 2ë‹¨ê³„: ì£¼ìš” 6ëŒ€ ì†ê¸ˆì„  ë¶„ì„ â†’ 3ë‹¨ê³„: êµ¬(Mount) ë¶„ì„
4ë‹¨ê³„: íŠ¹ìˆ˜ ì†ê¸ˆ ê°ì§€ â†’ 5ë‹¨ê³„: ì†ê°€ë½ ë¶„ì„ â†’ 6ë‹¨ê³„: ì¢…í•© í•´ì„

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ã€1. ì† í˜•íƒœ ë¶„ë¥˜ - ì„œì–‘ 4ì›ì†Œã€‘
â€¢ ë¶ˆì˜ ì†(Fire): ê¸´ ì†ë°”ë‹¥ + ì§§ì€ ì†ê°€ë½
  â†’ ì—´ì •ì , ë¦¬ë”ì‹­, í–‰ë™íŒŒ, ì°½ì˜ì , ì—ë„ˆì§€ ë„˜ì¹¨, ì¶©ë™ì  ê²½í–¥
â€¢ ë•…ì˜ ì†(Earth): ë„¤ëª¨ ì†ë°”ë‹¥ + ì§§ì€ ì†ê°€ë½
  â†’ ì‹¤ìš©ì , ì•ˆì • ì¶”êµ¬, ì‹ ë¢°, ëˆê¸°, ë¬¼ì§ˆì  ì„±ê³µ, ë³´ìˆ˜ì 
â€¢ ê³µê¸°ì˜ ì†(Air): ë„¤ëª¨ ì†ë°”ë‹¥ + ê¸´ ì†ê°€ë½
  â†’ ì§€ì , ë¶„ì„ì , ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥, í˜¸ê¸°ì‹¬, ë‹¤ì¬ë‹¤ëŠ¥, ì‚¬êµì 
â€¢ ë¬¼ì˜ ì†(Water): ê¸´ ì†ë°”ë‹¥ + ê¸´ ì†ê°€ë½
  â†’ ê°ìˆ˜ì„± í’ë¶€, ì˜ˆìˆ ì , ì§ê´€ë ¥, ì´ìƒì£¼ì˜, ê°ì •ì , ì°½ì¡°ì 

ã€2. ì£¼ìš” 6ëŒ€ ì†ê¸ˆì„  ìƒì„¸ã€‘

â–  ìƒëª…ì„  (Life Line)
- ìœ„ì¹˜: ì—„ì§€ì™€ ê²€ì§€ ì‚¬ì´ì—ì„œ ì‹œì‘í•´ ì—„ì§€ë¥¼ ê°ì‹¸ë©° ì†ëª© ë°©í–¥
- ì˜ë¯¸: ìƒëª…ë ¥, í™œë ¥, ì²´ë ¥, ì‚¶ì˜ ì§ˆ (ìˆ˜ëª… ê¸¸ì´ ì•„ë‹˜!)
- ê¸¸ê³  ê¹ŠìŒ = ê°•í•œ ìƒëª…ë ¥, ê±´ê°•
- ì§§ê±°ë‚˜ ì–•ìŒ = ì²´ë ¥ ê´€ë¦¬ í•„ìš”
- ë„“ì€ ê³¡ì„  = ì—´ì •ì , í™œë™ì 
- ì¢ì€ ê³¡ì„  = ì‹ ì¤‘í•¨, ì—ë„ˆì§€ ì ˆì•½í˜•
- ëŠê¹€ = ì‚¶ì˜ í° ë³€í™” ì‹œì 
- ì´ì¤‘ì„  = ìˆ˜í˜¸ì²œì‚¬, ê°•í•œ ë³´í˜¸ë ¥

â–  ë‘ë‡Œì„  (Head Line) - âš ï¸ ë§‰ì†ê¸ˆì´ë©´ ê°ì •ì„ ê³¼ í•©ì³ì§!
- ìœ„ì¹˜: ê²€ì§€ì™€ ì—„ì§€ ì‚¬ì´ì—ì„œ ì‹œì‘í•´ ì†ë°”ë‹¥ ê°€ë¡œì§€ë¦„
- ì˜ë¯¸: ì§€ëŠ¥, ì‚¬ê³ ë°©ì‹, í•™ìŠµëŠ¥ë ¥, ì •ì‹ ë ¥
- ì§ì„  = ë…¼ë¦¬ì , ë¶„ì„ì , ì‹¤ìš©ì  ì‚¬ê³ 
- ê³¡ì„  = ì°½ì˜ì , ìƒìƒë ¥ í’ë¶€, ì§ê´€ì 
- ê¸¸ì´ = ê¸¸ìˆ˜ë¡ ì‚¬ê³ ì˜ ê¹Šì´
- ìƒëª…ì„ ê³¼ ë¶™ì–´ ì‹œì‘ = ì‹ ì¤‘í•¨, ìƒê° ë§ìŒ
- ìƒëª…ì„ ê³¼ ë–¨ì–´ì ¸ ì‹œì‘ = ë…ë¦½ì , ëª¨í—˜ì‹¬
- ëì´ ë‘ ê°ˆë˜(ì‘ê°€ì˜ í¬í¬) = ì°½ì˜ë ¥+ë…¼ë¦¬ë ¥ ê· í˜•

â–  ê°ì •ì„  (Heart Line) - âš ï¸ ë§‰ì†ê¸ˆì´ë©´ ë‘ë‡Œì„ ê³¼ í•©ì³ì§!
- ìœ„ì¹˜: ì†ë°”ë‹¥ ìƒë‹¨, ìƒˆë¼ì†ê°€ë½~ê²€ì§€ ì•„ë˜ë¥¼ ê°€ë¡œì§€ë¦„
- ì˜ë¯¸: ê°ì • í‘œí˜„, ì‚¬ë‘ ë°©ì‹, ì¸ê°„ê´€ê³„
- ê²€ì§€ ì•„ë˜ê¹Œì§€ = ì´ìƒì£¼ì˜ì  ì‚¬ë‘, ë†’ì€ ê¸°ì¤€
- ì¤‘ì§€ ì•„ë˜ê¹Œì§€ = í˜„ì‹¤ì  ì‚¬ë‘, ìœ¡ì²´ì  í‘œí˜„
- ê²€ì§€-ì¤‘ì§€ ì‚¬ì´ = ê· í˜• ì¡íŒ ì‚¬ë‘
- ê³¡ì„  = ê°ì • í‘œí˜„ í’ë¶€
- ì§ì„  = ì´ì„±ì ì¸ ì‚¬ë‘
- ì‚¬ìŠ¬ ëª¨ì–‘ = ê°ì • ê¸°ë³µ, ë³µì¡í•œ ê°ì •

â–  ìš´ëª…ì„  (Fate Line)
- ìœ„ì¹˜: ì†ë°”ë‹¥ ì¤‘ì•™ ì„¸ë¡œì„ , ì¤‘ì§€ ë°©í–¥
- ì˜ë¯¸: ì¸ìƒ ë°©í–¥, ì»¤ë¦¬ì–´, ìš´ëª…
- ì†ëª©ì—ì„œ ì‹œì‘ = ì–´ë¦´ ë•Œë¶€í„° ëª©í‘œ ëª…í™•
- ìƒëª…ì„ ì—ì„œ ì‹œì‘ = ììˆ˜ì„±ê°€, ê°€ì¡± ì˜í–¥
- ë‘ë‡Œì„ ì—ì„œ ì‹œì‘ = 30ëŒ€ í›„ë°˜ë¶€í„° ì„±ê³µ
- ì—†ì–´ë„ ì •ìƒ = ììœ ë¡œìš´ ì‚¶, ìŠ¤ìŠ¤ë¡œ ê°œì²™í˜•
- ì„ ëª…í•¨ = ëª…í™•í•œ ì¸ìƒ ë°©í–¥

â–  íƒœì–‘ì„  (Sun Line / Apollo Line)
- ìœ„ì¹˜: ì•½ì§€ ì•„ë˜ íƒœì–‘êµ¬ ë°©í–¥
- ì˜ë¯¸: ì„±ê³µ, ëª…ì„±, ì¬ëŠ¥ ë°œíœ˜, í–‰ë³µ
- ìˆìœ¼ë©´ = ëª…ì„±ê³¼ ì„±ê³µì˜ ê°€ëŠ¥ì„±
- ì„ ëª…í•¨ = í™•ì‹¤í•œ ì„±ê³µ
- ì—¬ëŸ¬ ê°œ = ë‹¤ë°©ë©´ ì¬ëŠ¥
- ì—†ì–´ë„ ì •ìƒ

â–  ìˆ˜ì„±ì„  / ê±´ê°•ì„  (Mercury Line)
- ìœ„ì¹˜: ì†ë°”ë‹¥ í•˜ë‹¨ì—ì„œ ìƒˆë¼ì†ê°€ë½ ë°©í–¥ ì‚¬ì„ 
- ì˜ë¯¸: ê±´ê°• ìƒíƒœ, ì‚¬ì—… ìˆ˜ì™„
- ì—†ëŠ” ê²ƒì´ ì¢‹ìŒ = ê±´ê°•í•˜ë‹¤ëŠ” ì˜ë¯¸
- ì„ ëª…í•˜ë©´ = ì†Œí™”ê¸° ê±´ê°• ì£¼ì˜

ã€3. êµ¬(Mount) ìƒì„¸ ë¶„ì„ã€‘

â–  ëª©ì„±êµ¬ (ê²€ì§€ ì•„ë˜)
- ë°œë‹¬: ë¦¬ë”ì‹­, ì•¼ë§, ìì‹ ê°, ì¢…êµ/ì˜ì„±
- í‰í‰: ê²¸ì†, ì•¼ë§ ì ìŒ
- ê³¼ë„: ì˜¤ë§Œ, ë…ì¬ì 
- íŠ¹ìˆ˜í‘œì‹œ: ë³„=ì„±ê³µ, ì‹­ì=í–‰ë³µí•œ ê²°í˜¼, ì†”ë¡œëª¬ ë°˜ì§€=ì§€í˜œ

â–  í† ì„±êµ¬ (ì¤‘ì§€ ì•„ë˜)
- ë°œë‹¬: ì±…ì„ê°, ì§€í˜œ, ì‹ ì¤‘í•¨, í•™êµ¬ì 
- í‰í‰: ê· í˜• (ì •ìƒ)
- ê³¼ë„: ìš°ìš¸, ì—¼ì„¸ì 
- íŠ¹ìˆ˜í‘œì‹œ: ì‹­ì=ì‹ ë¹„ ê²½í—˜, ì‚¬ê°í˜•=ë³´í˜¸

â–  íƒœì–‘êµ¬/ì•„í´ë¡œêµ¬ (ì•½ì§€ ì•„ë˜)
- ë°œë‹¬: ì°½ì˜ë ¥, ì˜ˆìˆ , ë§¤ë ¥, ì„±ê³µ
- í‰í‰: ì‹¤ìš©ì£¼ì˜
- ê³¼ë„: í—ˆì˜, ê³¼ì‹œìš•
- íŠ¹ìˆ˜í‘œì‹œ: ë³„=ê°‘ì‘ìŠ¤ëŸ¬ìš´ ëª…ì„±

â–  ìˆ˜ì„±êµ¬ (ìƒˆë¼ì†ê°€ë½ ì•„ë˜)
- ë°œë‹¬: ì˜ì‚¬ì†Œí†µ, ì‚¬ì—… ìˆ˜ì™„, ê³¼í•™ì  ì¬ëŠ¥
- í‰í‰: í‘œí˜„ë ¥ ë¶€ì¡±
- ê³¼ë„: ë§ ë§ìŒ
- íŠ¹ìˆ˜í‘œì‹œ: ìˆ˜ì§ì„  3-4ê°œ=ì¹˜ìœ /ì˜ë£Œ ì¬ëŠ¥

â–  ê¸ˆì„±êµ¬ (ì—„ì§€ ì•„ë˜, ìƒëª…ì„  ì•ˆìª½)
- ë°œë‹¬: ì‚¬ë‘, ì—´ì •, ìƒëª…ë ¥, ìŒì•…ì  ì¬ëŠ¥, ë”°ëœ»í•¨
- í‰í‰: ëƒ‰ë‹´
- ê³¼ë„: ì¾Œë½ ì¶”êµ¬
- ë„“ì„ìˆ˜ë¡ = ì—´ì •ì , ê°€ì •ì 

â–  ì›”êµ¬ (ì†ë°”ë‹¥ í•˜ë‹¨ ë°”ê¹¥ìª½)
- ë°œë‹¬: ìƒìƒë ¥, ì§ê´€, ì°½ì˜ë ¥, ì—¬í–‰ìš´
- í‰í‰: í˜„ì‹¤ì 
- ê³¼ë„: ê³µìƒì— ë¹ ì§

ã€4. íŠ¹ìˆ˜ ì†ê¸ˆ ë¶„ì„ (í¬ê·€ ì†ê¸ˆ ê°ì§€ í•„ìˆ˜!)ã€‘

âš ï¸ íŠ¹ìˆ˜ ì†ê¸ˆì€ í¬ê·€í•˜ë¯€ë¡œ ì‹ ì¤‘í•˜ê²Œ íŒë³„í•˜ë˜, ë°œê²¬ ì‹œ ë°˜ë“œì‹œ ê¸°ë¡í•˜ì„¸ìš”!

â–  ë§‰ì§„ì†ê¸ˆ / ë§‰ì†ê¸ˆ / ê´€í†µì„  (Simian Line) - ì¸êµ¬ 1~4%
ã€íŒë³„ë²•ã€‘ê°ì •ì„ ê³¼ ë‘ë‡Œì„ ì´ "ì™„ì „íˆ í•˜ë‚˜ë¡œ í•©ì³ì ¸" ì†ë°”ë‹¥ì„ ê°€ë¡œì§€ë¥´ëŠ” ë‹¨ì¼ ì„ 
- ì¼ë°˜: ê°ì •ì„ (ìœ„) + ë‘ë‡Œì„ (ì•„ë˜) = 2ê°œ / ë§‰ì†ê¸ˆ: í•©ì³ì§„ 1ê°œ ê°•í•œ ê°€ë¡œì„ 
ã€íŠ¹ì„±ã€‘ì´ì„±ê³¼ ê°ì • í†µí•©, ê·¹ë„ì˜ ì§‘ì¤‘ë ¥, í‘ë°±ë…¼ë¦¬, ì˜¬ì¸ ì„±í–¥, ì „ë¬¸ ë¶„ì•¼ ë¹„ë²”í•œ ì„±ì·¨
ã€ìœ ëª…ì¸ã€‘í† ë‹ˆ ë¸”ë ˆì–´, íëŸ¬ë¦¬ í´ë¦°í„´, ë¡œë²„íŠ¸ ë“œ ë‹ˆë¡œ
ã€ì í•© ì§ì—…ã€‘ì—°êµ¬ì, ê³¼í•™ì, ì˜ˆìˆ ê°€, ìš´ë™ì„ ìˆ˜, ê¸°ì—…ê°€

â–  ì‹œë“œë‹ˆì„  (Sydney Line) - ì¸êµ¬ 5~10%
ã€íŒë³„ë²•ã€‘ë‘ë‡Œì„ ì´ ì†ë°”ë‹¥ ë(ìƒˆë¼ì†ê°€ë½ ìª½)ê¹Œì§€ "ì™„ì „íˆ" ê°€ë¡œì§€ë¦„ (ì¼ë°˜ì€ ì¤‘ê°„ì—ì„œ ëë‚¨)
ã€íŠ¹ì„±ã€‘ê³¼ì‰ ì‚¬ê³ , ë¶„ì„ ë§ˆë¹„, ì™„ë²½ì£¼ì˜, ê±±ì • ë§ìŒ, ë§¤ìš° ë†’ì€ ì§€ëŠ¥
ã€ì¡°ì–¸ã€‘ìƒê°ì„ ë©ˆì¶”ê³  í–‰ë™í•˜ëŠ” ì—°ìŠµ í•„ìš”

â–  Mì ì†ê¸ˆ (M Sign) - í¬ê·€
ã€íŒë³„ë²•ã€‘ìƒëª…ì„ +ë‘ë‡Œì„ +ê°ì •ì„ +ìš´ëª…ì„ ì´ ì•ŒíŒŒë²³ "M"ìë¥¼ ì„ ëª…í•˜ê²Œ í˜•ì„±
ã€íŠ¹ì„±ã€‘ì¬ë¬¼ìš´ íƒì›”, ì§ê´€ë ¥, ììˆ˜ì„±ê°€, ì‚¬ëŒ ë³´ëŠ” ëˆˆ ì •í™•, ë¦¬ë”ì‹­

â–  ì‘ê°€ì˜ í¬í¬ (Writer's Fork) - ë¹„êµì  í”í•¨
ã€íŒë³„ë²•ã€‘ë‘ë‡Œì„  ëì´ ë‘ ê°ˆë˜(Yì)ë¡œ ê°ˆë¼ì§
ã€íŠ¹ì„±ã€‘ì°½ì˜ë ¥+ë…¼ë¦¬ë ¥ ê· í˜•, ê¸€ì“°ê¸° ì¬ëŠ¥, ë‹¤ì¬ë‹¤ëŠ¥, ì–‘ë©´ì  ì‚¬ê³ 

â–  ì‹ ë¹„ì˜ ì‹­ì (Mystic Cross) - í¬ê·€
ã€íŒë³„ë²•ã€‘ë‘ë‡Œì„ ê³¼ ê°ì •ì„  "ì‚¬ì´" ì†ë°”ë‹¥ ì¤‘ì•™ì— ë…ë¦½ëœ Xì (ë‹¤ë¥¸ ì„ ê³¼ ë¬´ê´€í•˜ê²Œ ì¡´ì¬)
ã€íŠ¹ì„±ã€‘ê°•í•œ ì§ê´€ë ¥, ì˜ì  ëŠ¥ë ¥, ì˜ˆì§€ë ¥, ì´ˆìì—° ê´€ì‹¬, ì‹ ë¹„ì£¼ì˜

â–  ì†”ë¡œëª¬ì˜ ë°˜ì§€ (Ring of Solomon) - ë§¤ìš° í¬ê·€
ã€íŒë³„ë²•ã€‘ê²€ì§€ ì•„ë˜ ëª©ì„±êµ¬ë¥¼ ê°ì‹¸ëŠ” ë°˜ì›/í˜¸ í˜•íƒœ
ã€íŠ¹ì„±ã€‘íƒ€ê³ ë‚œ ì§€í˜œ, ë›°ì–´ë‚œ íŒë‹¨ë ¥, ë¦¬ë”ì‹­, íƒ€ì¸ ì´í•´ë ¥, êµìœ¡ì/ìƒë‹´ê°€ ì¬ëŠ¥

â–  ì§ê°ì„  (Line of Intuition) - ë§¤ìš° í¬ê·€
ã€íŒë³„ë²•ã€‘ì›”êµ¬(ì†ë°”ë‹¥ í•˜ë‹¨ ë°”ê¹¥)ì—ì„œ ì‹œì‘í•´ ìˆ˜ì„±êµ¬(ìƒˆë¼ì†ê°€ë½ ì•„ë˜) ë°©í–¥ìœ¼ë¡œ íœ˜ì–´ì§€ëŠ” ë°˜ì›
ã€íŠ¹ì„±ã€‘ë›°ì–´ë‚œ ì§ê´€ë ¥, ì˜ˆì§€ë ¥, ì‹¬ë¦¬ì  ëŠ¥ë ¥, ìƒë‹´/ì‹¬ë¦¬ ë¶„ì•¼ ì ì„±

â–  ê¸ˆì„±ëŒ€ (Girdle of Venus) - ë¹„êµì  ë“œë¬¾
ã€íŒë³„ë²•ã€‘ê°ì •ì„  ìœ„, ê²€ì§€ì™€ ì•½ì§€ ì‚¬ì´ë¥¼ ì‡ëŠ” ë°˜ì›
ã€íŠ¹ì„±ã€‘ê·¹ë„ì˜ ê°ìˆ˜ì„±, ì˜ˆìˆ ì  ê¸°ì§ˆ, ë¡œë§¨í‹±, ìŠ¤íŠ¸ë ˆìŠ¤ì— ì·¨ì•½

â–  ê²°í˜¼ì„  (Marriage Lines)
ã€ìœ„ì¹˜ã€‘ìƒˆë¼ì†ê°€ë½ ì•„ë˜, ê°ì •ì„  ìœ„ì˜ ì§§ì€ ê°€ë¡œì„ 
- 1ê°œ = í•œ ë²ˆì˜ ê¹Šì€ ê´€ê³„ / ì—¬ëŸ¬ ê°œ = ì—¬ëŸ¬ ì—°ì• 
- ê°ì •ì„  ê°€ê¹Œì´ = ì´ë¥¸ ê²°í˜¼ / ìƒˆë¼ì†ê°€ë½ ê°€ê¹Œì´ = ëŠ¦ì€ ê²°í˜¼
- ìœ„ë¡œ íœ¨ = ë…ì‹  ì„ í˜¸ / ì•„ë˜ë¡œ íœ¨ = ê´€ê³„ ì–´ë ¤ì›€

â–  íŠ¹ìˆ˜ ê¸°í˜¸ (ìœ„ì¹˜ë³„ ì˜ë¯¸ ë‹¤ë¦„)
- ë³„(â˜…): ê°‘ì‘ìŠ¤ëŸ¬ìš´ ì‚¬ê±´/í–‰ìš´ (ëª©ì„±êµ¬=ì„±ê³µ, íƒœì–‘êµ¬=ëª…ì„±)
- ì‹­ì(+): ì¥ì• ë¬¼ ë˜ëŠ” ë³€í™” (ëª©ì„±êµ¬=í–‰ë³µí•œ ê²°í˜¼)
- ì‚¼ê°í˜•(â–³): ì¬ëŠ¥ê³¼ ì„±ê³µ (ì†ë°”ë‹¥ ì¤‘ì•™=í° ì„±ê³µ)
- ì‚¬ê°í˜•(â–¡): ë³´í˜¸ í‘œì‹œ (ìœ„í—˜ ë°©ì§€)
- ì„¬(â—‹): í•´ë‹¹ ì‹œê¸° ì•½í™”/ì¥ì•  / ì‚¬ìŠ¬: ë¶ˆì•ˆì •, ì—ë„ˆì§€ ë¶„ì‚°

ã€5. ì†ê°€ë½ ë¶„ì„ (ë§¤ìš° ì¤‘ìš”!)ã€‘

â–  ì—„ì§€ (ì˜ì§€ë ¥ì˜ ì†ê°€ë½)
- ê¸¸ì´: ê¸´ ì—„ì§€ = ê°•í•œ ì˜ì§€ë ¥, ë¦¬ë”ì‹­ / ì§§ì€ ì—„ì§€ = íƒ€ì¸ ì˜ì¡´ ê²½í–¥
- ìœ ì—°ì„±: ë’¤ë¡œ ì˜ íœ˜ì–´ì§ = ì ì‘ë ¥, ê´€ëŒ€í•¨ / ë»£ë»£í•¨ = ê³ ì§‘, ì™„ê³ í•¨
- ê°ë„: ì†ë°”ë‹¥ì—ì„œ ë²Œì–´ì§„ ê°ë„ í´ìˆ˜ë¡ = ê°œë°©ì , ê´€ëŒ€í•¨
- ì²«ì§¸ ë§ˆë””(ì˜ì§€) vs ë‘˜ì§¸ ë§ˆë””(ë…¼ë¦¬) ë¹„ìœ¨ ë¶„ì„

â–  ê²€ì§€ (ëª©ì„±ì˜ ì†ê°€ë½ - ì•¼ë§/ë¦¬ë”ì‹­)
- ì•½ì§€ë³´ë‹¤ ê¸´ ê²½ìš° = ê°•í•œ ë¦¬ë”ì‹­, ìì‹ ê°, ì•¼ë§
- ì•½ì§€ë³´ë‹¤ ì§§ì€ ê²½ìš° = ì°½ì˜ì  ì„±í–¥, ìœ„í—˜ ê°ìˆ˜
- ì•½ì§€ì™€ ê°™ì€ ê²½ìš° = ê· í˜• ì¡íŒ ì„±ê²©
- ì¤‘ì§€ì˜ 80% ì´ìƒì´ë©´ ê¸´ ê²ƒ

â–  ì¤‘ì§€ (í† ì„±ì˜ ì†ê°€ë½ - ì±…ì„/ê· í˜•)
- ë‹¤ë¥¸ ì†ê°€ë½ì˜ ê¸°ì¤€ì  (ê°€ì¥ ê¸´ ì†ê°€ë½)
- ë§¤ìš° ê¸´ ê²½ìš° = ì§„ì§€í•¨, ê³ ë… ì„ í˜¸
- ì§§ì€ ê²½ìš° = ì¶©ë™ì , ììœ ë¡œì›€

â–  ì•½ì§€ (íƒœì–‘ì˜ ì†ê°€ë½ - ì°½ì˜/ì˜ˆìˆ )
- ê²€ì§€ë³´ë‹¤ ê¸´ ê²½ìš° = ì˜ˆìˆ ì , ìœ„í—˜ ê°ìˆ˜, ë„ë°• ì„±í–¥ ê°€ëŠ¥
- ê²€ì§€ë³´ë‹¤ ì§§ì€ ê²½ìš° = ìì‹ ê°, ë¦¬ë”ì‹­
- ì¤‘ì§€ì— ê°€ê¹Œìš´ ê¸¸ì´ = ì˜ˆìˆ ì  ì¬ëŠ¥

â–  ìƒˆë¼ì†ê°€ë½ (ìˆ˜ì„±ì˜ ì†ê°€ë½ - ì˜ì‚¬ì†Œí†µ/ì‚¬ì—…)
- ì•½ì§€ ì²«ì§¸ ë§ˆë””ì„  ë„˜ìœ¼ë©´ = ê¸´ ê²ƒ â†’ ë›°ì–´ë‚œ ì–¸ë³€, ì‚¬ì—… ìˆ˜ì™„
- ì§§ì€ ê²½ìš° = ë‚´ì„±ì , í‘œí˜„ ì–´ë ¤ì›€
- íœ˜ì–´ì§„ ê²½ìš° = ì™¸êµì , í˜‘ìƒë ¥

â–  ì†ê°€ë½ ê°„ê²© (ìì—°ìŠ¤ëŸ½ê²Œ íˆì„ ë•Œ)
- ê²€ì§€-ì¤‘ì§€ ë²Œì–´ì§ = ë…ë¦½ì  ì‚¬ê³ 
- ì¤‘ì§€-ì•½ì§€ ë²Œì–´ì§ = ë¯¸ë˜ ê±±ì • ì•ˆí•¨, ë‚™ì²œì 
- ì•½ì§€-ìƒˆë¼ ë²Œì–´ì§ = ë…ë¦½ì  í–‰ë™, ììœ ë¡œì›€
- ëª¨ë“  ì†ê°€ë½ ë¶™ìŒ = ì‹ ì¤‘í•¨, ë¹„ë°€ì£¼ì˜

â–  ì†ê°€ë½ ë§ˆë””
- ë§ˆë””ê°€ ë‘ë“œëŸ¬ì§„ ì†ê°€ë½ = ë¶„ì„ì , ë…¼ë¦¬ì 
- ë§¤ë„ëŸ¬ìš´ ì†ê°€ë½ = ì§ê´€ì , ì¶©ë™ì 

ã€6. ì†ëª©ì„  (íŒ”ì°Œì„ /Rascette Lines)ã€‘
- ìœ„ì¹˜: ì†ë°”ë‹¥ê³¼ ì†ëª©ì˜ ê²½ê³„ ê°€ë¡œì„ 
- 3ê°œ ì´ìƒ ì„ ëª… = ê±´ê°•, ì¥ìˆ˜, í–‰ìš´
- 2ê°œ = í‰ê· ì  ê±´ê°•
- 1ê°œ ë˜ëŠ” ë¶ˆëª…í™• = ì²´ë ¥ ê´€ë¦¬ í•„ìš”
- ì²« ë²ˆì§¸ ì„ ì´ ìœ„ë¡œ íœœ ê²½ìš° (ì—¬ì„±) = ì¶œì‚° ê´€ë ¨ ì£¼ì˜
- ì„ ì´ ëŠê¸°ì§€ ì•Šê³  ê¹Šê³  ì„ ëª… = ì¢‹ì€ ì§•ì¡°

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“ ì‘ë‹µ í˜•ì‹ (JSON)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

{
  "isValidPalm": true,
  "confidence": 85,
  "handType": "right/left/unknown",

  "handShape": {
    "type": "fire/earth/air/water",
    "description": "ì† í˜•íƒœ ì„¤ëª… (ì†ë°”ë‹¥ ëª¨ì–‘, ì†ê°€ë½ ê¸¸ì´ ê·¼ê±°)"
  },

  "fingers": {
    "thumb": {
      "length": "long/medium/short",
      "flexibility": "flexible/stiff/normal",
      "angle": "wide/normal/narrow (ì†ë°”ë‹¥ì—ì„œ ë²Œì–´ì§„ ê°ë„)",
      "meaning": "ì—„ì§€ í•´ì„ (ì˜ì§€ë ¥, ë…¼ë¦¬ë ¥)"
    },
    "index": {
      "length": "long/medium/short",
      "comparedToRing": "longer/shorter/equal (ì•½ì§€ ëŒ€ë¹„)",
      "meaning": "ê²€ì§€ í•´ì„ (ì•¼ë§, ë¦¬ë”ì‹­)"
    },
    "middle": {
      "length": "long/medium/short",
      "meaning": "ì¤‘ì§€ í•´ì„ (ì±…ì„ê°, ê· í˜•)"
    },
    "ring": {
      "length": "long/medium/short",
      "comparedToIndex": "longer/shorter/equal (ê²€ì§€ ëŒ€ë¹„)",
      "meaning": "ì•½ì§€ í•´ì„ (ì°½ì˜ë ¥, ì˜ˆìˆ ì„±)"
    },
    "pinky": {
      "length": "long/medium/short (ì•½ì§€ ì²«ë§ˆë”” ê¸°ì¤€)",
      "shape": "straight/curved",
      "meaning": "ìƒˆë¼ì†ê°€ë½ í•´ì„ (ì˜ì‚¬ì†Œí†µ, ì‚¬ì—…)"
    },
    "gaps": {
      "description": "ì†ê°€ë½ ê°„ê²© ë¶„ì„",
      "meaning": "ê°„ê²©ì´ ë‚˜íƒ€ë‚´ëŠ” ì„±ê²© íŠ¹ì„±"
    },
    "knuckles": "prominent/smooth (ë§ˆë”” ë‘ë“œëŸ¬ì§ ì—¬ë¶€)",
    "overallFingerMeaning": "ì†ê°€ë½ ì¢…í•© í•´ì„ (ë¦¬ë”ì‹­, ì°½ì˜ë ¥, ì˜ì‚¬ì†Œí†µ ë“±)"
  },

  "wristLines": {
    "count": "1/2/3/4 (íŒ”ì°Œì„  ê°œìˆ˜)",
    "clarity": "clear/faint/broken",
    "description": "ì†ëª©ì„  ìƒíƒœ ì„¤ëª…",
    "meaning": "ì†ëª©ì„  í•´ì„ (ê±´ê°•, ì¥ìˆ˜, í–‰ìš´)"
  },

  "lines": {
    "lifeLine": {
      "description": "ìƒëª…ì„ ì˜ ë¬¼ë¦¬ì  íŠ¹ì§• ìƒì„¸ ê¸°ìˆ ",
      "length": "long/medium/short",
      "depth": "deep/medium/shallow",
      "meaning": "ìƒëª…ì„  ê¸°ë°˜ í•´ì„"
    },
    "headLine": {
      "description": "ë‘ë‡Œì„ ì˜ ë¬¼ë¦¬ì  íŠ¹ì§• (âš ï¸ ë§‰ì†ê¸ˆì´ë©´ ê°ì •ì„ ê³¼ í•©ì³ì§ ëª…ì‹œ)",
      "shape": "straight/curved/merged_with_heart",
      "meaning": "ë‘ë‡Œì„  ê¸°ë°˜ í•´ì„"
    },
    "heartLine": {
      "description": "ê°ì •ì„ ì˜ ë¬¼ë¦¬ì  íŠ¹ì§• (âš ï¸ ë§‰ì†ê¸ˆì´ë©´ ë‘ë‡Œì„ ê³¼ í•©ì³ì§ ëª…ì‹œ)",
      "endPosition": "underIndex/underMiddle/merged_with_head",
      "meaning": "ê°ì •ì„  ê¸°ë°˜ í•´ì„"
    },
    "fateLine": {
      "present": true/false,
      "description": "ìš´ëª…ì„  ì„¤ëª…",
      "meaning": "ìš´ëª…ì„  í•´ì„"
    },
    "sunLine": {
      "present": true/false,
      "description": "íƒœì–‘ì„  ì„¤ëª…",
      "meaning": "íƒœì–‘ì„  í•´ì„"
    }
  },

  "mounts": {
    "jupiter": { "development": "developed/normal/flat", "meaning": "ëª©ì„±êµ¬ í•´ì„" },
    "saturn": { "development": "developed/normal/flat", "meaning": "í† ì„±êµ¬ í•´ì„" },
    "apollo": { "development": "developed/normal/flat", "meaning": "íƒœì–‘êµ¬ í•´ì„" },
    "mercury": { "development": "developed/normal/flat", "meaning": "ìˆ˜ì„±êµ¬ í•´ì„" },
    "venus": { "development": "developed/normal/flat", "meaning": "ê¸ˆì„±êµ¬ í•´ì„" },
    "moon": { "development": "developed/normal/flat", "meaning": "ì›”êµ¬ í•´ì„" }
  },

  "specialMarks": {
    "simianLine": false,
    "simianLineDescription": "ë§‰ì†ê¸ˆ ê°ì§€ ì‹œ: 'ë‘ë‡Œì„ ê³¼ ê°ì •ì„ ì´ í•˜ë‚˜ë¡œ í•©ì³ì§„ ë§‰ì†ê¸ˆì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì¸êµ¬ì˜ 1-4%ì—ì„œë§Œ ë‚˜íƒ€ë‚˜ëŠ” í¬ê·€í•œ íŠ¹ì§•ìœ¼ë¡œ...' í˜•ì‹ìœ¼ë¡œ ìƒì„¸ ì„¤ëª…",
    "sydneyLine": false,
    "sydneyLineDescription": "ì‹œë“œë‹ˆì„  ê°ì§€ ì‹œ ìƒì„¸ ì„¤ëª… (ë¯¸ê°ì§€ ì‹œ ë¹ˆ ë¬¸ìì—´)",
    "mSign": false,
    "mSignDescription": "Mì ì†ê¸ˆ ê°ì§€ ì‹œ ìƒì„¸ ì„¤ëª… (ë¯¸ê°ì§€ ì‹œ ë¹ˆ ë¬¸ìì—´)",
    "writersFork": false,
    "writersForkDescription": "ì‘ê°€ì˜ í¬í¬ ê°ì§€ ì‹œ ìƒì„¸ ì„¤ëª… (ë¯¸ê°ì§€ ì‹œ ë¹ˆ ë¬¸ìì—´)",
    "mysticCross": false,
    "mysticCrossDescription": "ì‹ ë¹„ì˜ ì‹­ì ê°ì§€ ì‹œ ìƒì„¸ ì„¤ëª… (ë¯¸ê°ì§€ ì‹œ ë¹ˆ ë¬¸ìì—´)",
    "ringOfSolomon": false,
    "ringOfSolomonDescription": "ì†”ë¡œëª¬ì˜ ë°˜ì§€ ê°ì§€ ì‹œ ìƒì„¸ ì„¤ëª… (ë¯¸ê°ì§€ ì‹œ ë¹ˆ ë¬¸ìì—´)",
    "lineOfIntuition": false,
    "lineOfIntuitionDescription": "ì§ê°ì„  ê°ì§€ ì‹œ ìƒì„¸ ì„¤ëª… (ë¯¸ê°ì§€ ì‹œ ë¹ˆ ë¬¸ìì—´)",
    "girdleOfVenus": false,
    "girdleOfVenusDescription": "ê¸ˆì„±ëŒ€ ê°ì§€ ì‹œ ìƒì„¸ ì„¤ëª… (ë¯¸ê°ì§€ ì‹œ ë¹ˆ ë¬¸ìì—´)",
    "stars": ["ìœ„ì¹˜ì™€ ì˜ë¯¸ ì„¤ëª… ë°°ì—´"],
    "crosses": ["ìœ„ì¹˜ì™€ ì˜ë¯¸ ì„¤ëª… ë°°ì—´"],
    "triangles": ["ìœ„ì¹˜ì™€ ì˜ë¯¸ ì„¤ëª… ë°°ì—´"],
    "squares": ["ìœ„ì¹˜ì™€ ì˜ë¯¸ ì„¤ëª… ë°°ì—´ (ë³´í˜¸ í‘œì‹œ)"],
    "islands": ["ìœ„ì¹˜ì™€ ì˜ë¯¸ ì„¤ëª… ë°°ì—´"],
    "chains": ["ìœ„ì¹˜ì™€ ì˜ë¯¸ ì„¤ëª… ë°°ì—´"]
  },

  "personality": {
    "summary": "ìµœì†Œ 150ì, ì† í˜•íƒœ(4ì›ì†Œ) + ì†ê°€ë½ íŠ¹ì„± + ì£¼ìš” ì„ ì˜ íŠ¹ì§•ì„ ê·¼ê±°ë¡œ ì„±ê²© ìš”ì•½. íŠ¹ìˆ˜ ì†ê¸ˆ ë°œê²¬ ì‹œ ì²« ë¬¸ì¥ì— ì–¸ê¸‰",
    "strengths": ["ê°•ì  5ê°œ - ê°ê° ì–´ë–¤ ì„ /êµ¬/ì†ê°€ë½/ì† í˜•íƒœ ë•Œë¬¸ì¸ì§€ ê·¼ê±° ëª…ì‹œ"],
    "weaknesses": ["ì•½ì  3ê°œ - ì†ê¸ˆì  ê·¼ê±°ì™€ í•¨ê»˜ ê°œì„  ì¡°ì–¸"],
    "hiddenTalents": ["ìˆ¨ì€ ì¬ëŠ¥ 4ê°œ - ì†ê°€ë½ ê¸¸ì´, êµ¬ ë°œë‹¬ ë“± ì ì¬ë ¥ì˜ ì†ê¸ˆì  ê·¼ê±°"],
    "detailedAnalysis": "ìµœì†Œ 250ì, ì† í˜•íƒœ/ì†ê°€ë½ ë¶„ì„/ì†ê¸ˆì„ /êµ¬/ì†ëª©ì„ /íŠ¹ìˆ˜ ì†ê¸ˆì„ ì—°ê²°í•œ ìƒì„¸ ë¶„ì„"
  },

  "loveReading": {
    "currentStatus": "í˜„ì¬ ê°ì • ìƒíƒœ (ê°ì •ì„  í˜•íƒœ/ê¹Šì´/ëì  ê·¼ê±°)",
    "loveStyle": "ì‚¬ë‘ ë°©ì‹ (ê°ì •ì„  + ê¸ˆì„±êµ¬ + ì† í˜•íƒœ ê·¼ê±°). íŠ¹ìˆ˜ ì†ê¸ˆ ë°œê²¬ ì‹œ í•´ë‹¹ íŠ¹ì„± ë°˜ì˜",
    "idealPartner": "ì´ìƒí˜• (ì†ê¸ˆ íŠ¹ì„± ê¸°ë°˜)",
    "marriageProspect": "ê²°í˜¼ìš´ (ê²°í˜¼ì„  ê°œìˆ˜/ìœ„ì¹˜/ëª¨ì–‘ + ê¸ˆì„±êµ¬ ë°œë‹¬ ê·¼ê±°)",
    "timing": "ì—°ì• /ê²°í˜¼ ì‹œê¸° ì¡°ì–¸ (ê²°í˜¼ì„  ìœ„ì¹˜ ê·¼ê±°)",
    "advice": "ì†ê¸ˆ íŠ¹ì„±ì— ë§ëŠ” êµ¬ì²´ì  ì¡°ì–¸",
    "score": 75
  },

  "careerReading": {
    "naturalTalents": ["íƒ€ê³ ë‚œ ì¬ëŠ¥ 5ê°œ - ì† í˜•íƒœ/ë‘ë‡Œì„ /ì†ê°€ë½ ê¸¸ì´/êµ¬ ë°œë‹¬ ë“± ì†ê¸ˆ ê·¼ê±° ëª…ì‹œ"],
    "suitableCareers": ["ì† í˜•íƒœì™€ ì£¼ìš” ì„  + ì†ê°€ë½ íŠ¹ì„±ì— ë§ëŠ” ì§ì—… 5-7ê°œ. ê²€ì§€>ì•½ì§€=ë¦¬ë”ì‹­ì§, ì•½ì§€>ê²€ì§€=ì°½ì˜ì§ ë“± ë°˜ì˜"],
    "workStyle": "ì—…ë¬´ ìŠ¤íƒ€ì¼ (ë‘ë‡Œì„  í˜•íƒœ/ì† í˜•íƒœ/ì†ê°€ë½ ë§ˆë””/í™”ì„±êµ¬ ê·¼ê±°)",
    "leadershipPotential": "ë¦¬ë”ì‹­ ì ì¬ë ¥ (ëª©ì„±êµ¬ + ê²€ì§€ ê¸¸ì´ + ì—„ì§€ í¬ê¸° ì¢…í•©)",
    "businessAbility": "ì‚¬ì—… ëŠ¥ë ¥ (ìˆ˜ì„±êµ¬ + ìƒˆë¼ì†ê°€ë½ ê¸¸ì´ + ì†ê°€ë½ ê°„ê²© ì¢…í•©)",
    "communicationSkill": "ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥ (ìƒˆë¼ì†ê°€ë½ ê¸¸ì´/í˜•íƒœ ê·¼ê±°)",
    "careerAdvice": "ì†ê¸ˆ íŠ¹ì„±ì— ë§ëŠ” ì»¤ë¦¬ì–´ ì¡°ì–¸",
    "score": 80
  },

  "wealthReading": {
    "moneyMakingAbility": "ì¬ë¬¼ íšë“ ëŠ¥ë ¥",
    "savingTendency": "ì €ì¶• ì„±í–¥",
    "investmentStyle": "íˆ¬ì ìŠ¤íƒ€ì¼",
    "luckyFields": ["í–‰ìš´ ë¶„ì•¼"],
    "financialAdvice": "ì¬ì • ì¡°ì–¸",
    "wealthPotential": "ì¬ë¬¼ìš´ ì ì¬ë ¥",
    "score": 72
  },

  "healthReading": {
    "constitution": "ì²´ì§ˆ ë¶„ì„ (ì† í˜•íƒœ ê¸°ë°˜ - ë¶ˆ=ì‹¬ì¥, ë•…=ì†Œí™”ê¸°, ê³µê¸°=ì‹ ê²½, ë¬¼=ì‹ ì¥)",
    "vitality": "ìƒëª…ë ¥ ìˆ˜ì¤€ (ìƒëª…ì„  ê¹Šì´/ê¸¸ì´ + ì†ëª©ì„  ê°œìˆ˜ ì¢…í•©)",
    "strongPoints": ["ê±´ê°• ê°•ì  - ìƒëª…ì„ /ì†ëª©ì„ /ê¸ˆì„±êµ¬ ë°œë‹¬ ë“± ê·¼ê±°"],
    "concernAreas": ["ì£¼ì˜ ì˜ì—­ - ì†ê¸ˆ/ì†ìƒ‰/ì†ì§ˆê°/ì†ëª©ì„  ìƒíƒœ ê·¼ê±°"],
    "stressManagement": "ìŠ¤íŠ¸ë ˆìŠ¤ ê´€ë¦¬ë²• (ì†ê¸ˆ íŠ¹ì„± ê¸°ë°˜)",
    "longevity": "ì¥ìˆ˜ ì§€í‘œ (ì†ëª©ì„  ê°œìˆ˜ + ìƒëª…ì„  ìƒíƒœ ì¢…í•©)",
    "recommendations": ["ê±´ê°• ê¶Œì¥ì‚¬í•­ 4-5ê°œ"],
    "score": 70
  },

  "lifePath": {
    "earlyLife": "ì´ˆë…„ê¸° (0-30ì„¸)",
    "middleLife": "ì¤‘ë…„ê¸° (30-50ì„¸)",
    "laterLife": "ë§ë…„ê¸° (50ì„¸+)",
    "majorTurningPoints": ["ì¸ìƒ ì „í™˜ì "],
    "lifeTheme": "ì¸ìƒ í…Œë§ˆ"
  },

  "advice": {
    "immediate": "ì¦‰ê° ì¡°ì–¸ (ì†ê¸ˆ íŠ¹ì„± ê¸°ë°˜)",
    "shortTerm": "ë‹¨ê¸° ì¡°ì–¸ 3ê°œì›” (êµ¬ì²´ì  í–‰ë™)",
    "longTerm": "ì¥ê¸° ì¡°ì–¸ 5ë…„ (ì¸ìƒ ë°©í–¥)",
    "warnings": ["ì†ê¸ˆ íŠ¹ì„±ì— ë”°ë¥¸ ì£¼ì˜ì‚¬í•­ 3-4ê°œ. íŠ¹ìˆ˜ ì†ê¸ˆ ë°œê²¬ ì‹œ í•´ë‹¹ íŠ¹ì„±ì˜ ë‹¨ì  í¬í•¨"],
    "affirmation": "ì´ ì‚¬ëŒì˜ ì†ê¸ˆ íŠ¹ì„±(ì† í˜•íƒœ, ê°•ì , ì ì¬ë ¥)ì„ ë°˜ì˜í•œ ê°œì¸í™”ëœ ê¸ì • í™•ì–¸. ë§¤ë²ˆ ë‹¤ë¥´ê²Œ, êµ¬ì²´ì ìœ¼ë¡œ ì‘ì„±. ì˜ˆ: 'ë‚˜ì˜ [íŠ¹ì • ê°•ì ]ì€ [êµ¬ì²´ì  ëª©í‘œ]ë¥¼ ì´ë£¨ëŠ” í˜ì´ ë©ë‹ˆë‹¤' í˜•ì‹"
  },

  "luckyElements": {
    "colors": ["í–‰ìš´ì˜ ìƒ‰"],
    "numbers": [í–‰ìš´ ìˆ«ì],
    "directions": ["í–‰ìš´ ë°©í–¥"],
    "stones": ["í–‰ìš´ ë³´ì„"],
    "days": ["í–‰ìš´ ìš”ì¼"]
  },

  "overallScore": 76,
  "specialNotes": "íŠ¹ìˆ˜ ì†ê¸ˆ(ë§‰ì†ê¸ˆ, ì‹œë“œë‹ˆì„ , Mì, ì‹ ë¹„ì˜ ì‹­ì ë“±) ë°œê²¬ ì‹œ í¬ê·€ì„±ê³¼ íŠ¹ë³„í•œ ì˜ë¯¸ ìƒì„¸ ì„¤ëª… (ìµœì†Œ 80ì). ë¯¸ë°œê²¬ ì‹œ ì†ê¸ˆì˜ ì „ì²´ì ì¸ íŠ¹ì§• ìš”ì•½"
}

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
âš ï¸ í•µì‹¬ ì§€ì¹¨ (ë°˜ë“œì‹œ ì¤€ìˆ˜)
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1. **ì²´ê³„ì  ë¶„ì„ ìˆœì„œ ì¤€ìˆ˜**: ì† í˜•íƒœ â†’ ì†ê°€ë½ ë¶„ì„ â†’ ì†ëª©ì„  â†’ ì£¼ìš”ì„  â†’ êµ¬ â†’ íŠ¹ìˆ˜ ì†ê¸ˆ â†’ ì¢…í•©
2. **ê·¼ê±° ê¸°ë°˜ í•´ì„ í•„ìˆ˜**: ëª¨ë“  í•´ì„ì— "~ì„ ì´/~êµ¬ê°€ ~í•˜ê¸° ë•Œë¬¸ì—" ê·¼ê±° í¬í•¨
   ì˜ˆì‹œ: "ìƒëª…ì„ ì´ ì—„ì§€ë¥¼ ë„“ê²Œ ê°ì‹¸ê³  ê¹Šì´ ìƒˆê²¨ì ¸ ìˆì–´ ìƒëª…ë ¥ì´ ê°•í•©ë‹ˆë‹¤"
3. **íŠ¹ìˆ˜ ì†ê¸ˆ ì •í™•íˆ ê°ì§€** (ë°œê²¬ ì‹œ ë°˜ë“œì‹œ ê¸°ë¡):
   - ë§‰ì†ê¸ˆ(Simian): ê°ì •ì„ +ë‘ë‡Œì„ ì´ ì™„ì „íˆ í•˜ë‚˜ì¸ì§€ í™•ì¸
   - ì‹œë“œë‹ˆì„ (Sydney): ë‘ë‡Œì„ ì´ ì†ë°”ë‹¥ ëê¹Œì§€ ì™„ì „íˆ ê°€ë¡œì§€ë¥´ëŠ”ì§€ í™•ì¸
   - Mì ì†ê¸ˆ: 4ê°œ ì„ ì´ Mì í˜•ì„±í•˜ëŠ”ì§€ í™•ì¸
   - ì‹ ë¹„ì˜ ì‹­ì: ë‘ë‡Œì„ -ê°ì •ì„  ì‚¬ì´ ë…ë¦½ëœ Xì í™•ì¸
   - ì†”ë¡œëª¬ì˜ ë°˜ì§€: ê²€ì§€ ì•„ë˜ ë°˜ì› í™•ì¸
   - ì§ê°ì„ , ê¸ˆì„±ëŒ€, ì‘ê°€ì˜ í¬í¬ ë“±ë„ ë¹ ì§ì—†ì´ ì²´í¬
4. **íŠ¹ìˆ˜ ì†ê¸ˆ ë°œê²¬ ì‹œ**: í•´ë‹¹ ì†ê¸ˆì˜ íŠ¹ì„±ì„ ì „ì²´ ë¶„ì„ì— ìì—°ìŠ¤ëŸ½ê²Œ ë°˜ì˜
   - specialMarks ê°ì²´ì— trueë¡œ ê¸°ë¡
   - specialNotesì— ë°œê²¬ëœ íŠ¹ìˆ˜ ì†ê¸ˆ ì„¤ëª… (ìµœì†Œ 80ì)
   - ì„±ê²©/ì§ì—…/ì—°ì•  í•´ì„ì— í•´ë‹¹ íŠ¹ì„± ë°˜ì˜
5. **ì†ê°€ë½ ë¶„ì„ í•„ìˆ˜** (fingers ê°ì²´ ë°˜ë“œì‹œ ì±„ìš°ê¸°):
   - ê²€ì§€ vs ì•½ì§€ ê¸¸ì´ ë¹„êµ â†’ ë¦¬ë”ì‹­/ì°½ì˜ë ¥ íŒë‹¨
   - ìƒˆë¼ì†ê°€ë½ ê¸¸ì´(ì•½ì§€ ì²«ë§ˆë”” ê¸°ì¤€) â†’ ì˜ì‚¬ì†Œí†µ ëŠ¥ë ¥
   - ì—„ì§€ í¬ê¸°ì™€ ìœ ì—°ì„± â†’ ì˜ì§€ë ¥, ì ì‘ë ¥
   - ì†ê°€ë½ ê°„ê²© â†’ ì„±ê²© ê°œë°©ì„±
   - ë§ˆë”” ë‘ë“œëŸ¬ì§ â†’ ë¶„ì„ì  vs ì§ê´€ì 
6. **ì†ëª©ì„ (íŒ”ì°Œì„ ) ë¶„ì„ í•„ìˆ˜** (wristLines ê°ì²´ ë°˜ë“œì‹œ ì±„ìš°ê¸°):
   - ì„  ê°œìˆ˜ (3ê°œ ì´ìƒ = ê±´ê°•/ì¥ìˆ˜)
   - ì„ ëª…ë„ì™€ ëŠê¹€ ì—¬ë¶€
7. **ì¼ë°˜ ì†ê¸ˆë„ ìƒì„¸í•˜ê²Œ ë¶„ì„**:
   - ê° ì„ ì˜ ë¬¼ë¦¬ì  íŠ¹ì§• (ê¸¸ì´, ê¹Šì´, í˜•íƒœ, ëì ) êµ¬ì²´ì  ê¸°ìˆ 
   - 6ê°œ êµ¬(Mount)ì˜ ë°œë‹¬ ìƒíƒœ ëª¨ë‘ í™•ì¸
   - íŠ¹ìˆ˜ ê¸°í˜¸(ë³„, ì‹­ì, ì‚¼ê°í˜•, ì‚¬ê°í˜•, ì„¬, ì‚¬ìŠ¬) ìœ„ì¹˜ë³„ í™•ì¸
   - ì† í˜•íƒœì— ë”°ë¥¸ ì„±ê²© íŠ¹ì„± ë°˜ì˜
8. **ì ìˆ˜**: 60-88 ë²”ìœ„ (90+ ë§¤ìš° ë“œë¬¾)
9. **ì–¸ì–´**: í•œêµ­ì–´, ë”°ëœ»í•˜ê³  ê¸ì •ì ì¸ í†¤, ë¶€ì •ì ì¸ ê²ƒë„ ì¡°ì–¸ í˜•íƒœë¡œ
10. **ê¸ì • í™•ì–¸ ê°œì¸í™” í•„ìˆ˜**: affirmationì€ ë°˜ë“œì‹œ ì´ ì‚¬ëŒì˜ ì†ê¸ˆì—ì„œ ë°œê²¬ëœ êµ¬ì²´ì  íŠ¹ì„±ì„ ì–¸ê¸‰í•´ì•¼ í•¨
    - âŒ ë‚˜ìœ ì˜ˆ: "ë‚˜ëŠ” ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤" (ë„ˆë¬´ ì¼ë°˜ì )
    - âœ… ì¢‹ì€ ì˜ˆ: "ë‚˜ì˜ ê¹Šì€ ë‘ë‡Œì„ ì´ ë³´ì—¬ì£¼ëŠ” ë¶„ì„ë ¥ìœ¼ë¡œ ì–´ë–¤ ë¬¸ì œë„ í•´ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤"
    - âœ… ì¢‹ì€ ì˜ˆ: "ë¶ˆì˜ ì†ì´ ê°€ì§„ ì—´ì •ìœ¼ë¡œ ë‚˜ëŠ” ì›í•˜ëŠ” ëª¨ë“  ê²ƒì„ ì´ë£¹ë‹ˆë‹¤"
    - âœ… ì¢‹ì€ ì˜ˆ: "ë°œë‹¬í•œ ëª©ì„±êµ¬ê°€ ë‚˜íƒ€ë‚´ëŠ” ë¦¬ë”ì‹­ìœ¼ë¡œ ë‚˜ëŠ” ì‚¬ëŒë“¤ì„ ì´ë•ë‹ˆë‹¤"
11. **JSONë§Œ ë°˜í™˜** (ë§ˆí¬ë‹¤ìš´ ì½”ë“œë¸”ë¡ ì—†ì´)
12. **ì‹¤ì œ ë³´ì´ëŠ” ê²ƒë§Œ ë¶„ì„** - ì¶”ì¸¡ ê¸ˆì§€, ë³´ì´ì§€ ì•Šìœ¼ë©´ "unknown" ë˜ëŠ” ë¹ˆ ë¬¸ìì—´
13. **ì†ê°€ë½ì´ ë³´ì´ì§€ ì•ŠëŠ” ê²½ìš°**: fingers ê°ì²´ì— "ì†ê°€ë½ì´ ì´ë¯¸ì§€ì—ì„œ ë³´ì´ì§€ ì•ŠìŒ" ê¸°ë¡
14. **ì†ëª©ì´ ë³´ì´ì§€ ì•ŠëŠ” ê²½ìš°**: wristLinesì— "ì†ëª©ì´ ì´ë¯¸ì§€ì—ì„œ ë³´ì´ì§€ ì•ŠìŒ" ê¸°ë¡

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ“š DB ì§€ì‹ í™œìš© í•„ìˆ˜ ì§€ì¹¨
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

ìœ„ì—ì„œ ì œê³µëœ VERIFIED_PALMISTRY_KNOWLEDGE ë°ì´í„°ë² ì´ìŠ¤ë¥¼ ë°˜ë“œì‹œ ì°¸ì¡°í•˜ì—¬:

1. **ì† í˜•íƒœ í•´ì„**: handShapesì˜ personality, careers, healthTendency í™œìš©
2. **ì£¼ìš”ì„  í•´ì„**: majorLinesì˜ ê° ì„ ë³„ length, depth, shape, specialMarks ì°¸ì¡°
3. **ë¶€ê°€ì„  í•´ì„**: minorLinesì˜ marriageLines, travelLines, braceletLines ë“± ì°¸ì¡°
4. **êµ¬(Mount) í•´ì„**: mountsì˜ development ë ˆë²¨ë³„ ì˜ë¯¸, specialMarks ì°¸ì¡°
5. **íŠ¹ìˆ˜ ì†ê¸ˆ**: specialFeaturesì˜ prevalence, characteristics, positiveTraits, negativeTraits ì°¸ì¡°
6. **ì†ê°€ë½ ë¶„ì„**: fingersì˜ ê° ì†ê°€ë½ë³„ length, lean, meaning ì°¸ì¡°
7. **ê±´ê°• ì§€í‘œ**: healthIndicatorsì˜ generalHealth, specificIndicators ì°¸ì¡°
8. **ë™ì–‘ ì†ê¸ˆí•™**: easternPalmistryì˜ í•œêµ­/ì¤‘êµ­/ì¸ë„ í•´ì„ ì°¸ì¡°í•˜ì—¬ í’ë¶€í•œ í•´ì„

âš ï¸ í•´ì„ ì‹œ DBì— ìˆëŠ” êµ¬ì²´ì  ë‚´ìš©ì„ ì§ì ‘ ì¸ìš©í•˜ì—¬ ê·¼ê±°ë¥¼ ì œì‹œí•˜ì„¸ìš”!
ì˜ˆ: "ëª©ì„±êµ¬ê°€ ë°œë‹¬í–ˆìŠµë‹ˆë‹¤. DBì— ë”°ë¥´ë©´ ì´ëŠ” 'ê°•í•œ ë¦¬ë”ì‹­, ì•¼ë§, ìì‹ ê°, ê¶Œìœ„ ì¶”êµ¬'ë¥¼ ì˜ë¯¸í•©ë‹ˆë‹¤."
ì˜ˆ: "ë§‰ì†ê¸ˆì´ ë°œê²¬ë˜ì—ˆìŠµë‹ˆë‹¤. ì´ëŠ” ì „ì²´ ì¸êµ¬ì˜ 1-4%ë§Œ ê°€ì§„ í¬ê·€í•œ íŠ¹ì§•ìœ¼ë¡œ,
    'ê·¹ë„ì˜ ì§‘ì¤‘ë ¥ê³¼ ëª°ì…, í‘ë°±ë…¼ë¦¬, í•œ ê°€ì§€ì— ì˜¬ì¸í•˜ëŠ” ì„±í–¥'ì„ ë‚˜íƒ€ëƒ…ë‹ˆë‹¤."
`;

export async function POST(request: NextRequest) {
  try {
    const body = await request.json();
    const { image, mimeType, action } = body;

    const apiKey = process.env.GEMINI_API_KEY;
    if (!apiKey) {
      return NextResponse.json(
        { error: 'API í‚¤ê°€ ì„¤ì •ë˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤.' },
        { status: 500 }
      );
    }

    const genAI = new GoogleGenerativeAI(apiKey);
    const model = genAI.getGenerativeModel({
      model: 'gemini-3-flash-preview',
      generationConfig: {
        temperature: 0.7,
        maxOutputTokens: 8192,
      }
    });

    // JSON íŒŒì‹± í—¬í¼ í•¨ìˆ˜
    const parseJsonResponse = (text: string): any => {
      // ë§ˆí¬ë‹¤ìš´ ì½”ë“œ ë¸”ë¡ ì œê±°
      let cleaned = text.replace(/```json\n?/g, '').replace(/```\n?/g, '').trim();

      // JSON ê°ì²´ ì¶”ì¶œ
      const jsonMatch = cleaned.match(/\{[\s\S]*\}/);
      if (!jsonMatch) {
        console.error('JSON not found in response:', text.substring(0, 500));
        throw new Error('AI ì‘ë‹µì—ì„œ JSONì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
      }

      try {
        return JSON.parse(jsonMatch[0]);
      } catch (e) {
        // JSON íŒŒì‹± ì‹¤íŒ¨ ì‹œ ì¼ë°˜ì ì¸ ë¬¸ì œ ìˆ˜ì • ì‹œë„
        let fixedJson = jsonMatch[0]
          .replace(/,\s*}/g, '}')
          .replace(/,\s*]/g, ']')
          .replace(/'/g, '"')
          .replace(/\n/g, ' ');

        try {
          return JSON.parse(fixedJson);
        } catch (e2) {
          console.error('JSON parse error:', e2, 'Text:', fixedJson.substring(0, 500));
          throw new Error('AI ì‘ë‹µì„ íŒŒì‹±í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.');
        }
      }
    };

    // ë¶„ì„ ìš”ì²­
    if (action === 'analyze') {
      const result = await model.generateContent([
        { text: PALM_ANALYSIS_PROMPT },
        {
          inlineData: {
            mimeType: mimeType,
            data: image,
          },
        },
      ]);

      const response = await result.response;
      const text = response.text();

      if (!text || text.trim().length === 0) {
        return NextResponse.json(
          { error: 'ë¶„ì„ ê²°ê³¼ê°€ ë¹„ì–´ìˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.' },
          { status: 500 }
        );
      }

      const combined = parseJsonResponse(text);

      // ë¶„ì„ ë°ì´í„° êµ¬ì¡°í™”
      const analysis = {
        isValidPalm: combined.isValidPalm ?? true,
        confidence: combined.confidence ?? 75,
        handType: combined.handType ?? 'unknown',
        handShape: combined.handShape ?? { type: 'earth', description: 'ë¶„ì„ ì¤‘' },
        fingers: combined.fingers ?? { overallFingerMeaning: 'ì†ê°€ë½ ë¶„ì„ ì •ë³´ ì—†ìŒ' },
        wristLines: combined.wristLines ?? { count: 'unknown', meaning: 'ì†ëª©ì„  ë¶„ì„ ì •ë³´ ì—†ìŒ' },
        lines: combined.lines ?? {},
        mounts: combined.mounts ?? {},
        specialMarks: combined.specialMarks ?? {}
      };

      // í•´ì„ ë°ì´í„° êµ¬ì¡°í™”
      const interpretation = {
        personality: combined.personality ?? {
          summary: 'ë¶„ì„ ê²°ê³¼ë¥¼ í™•ì¸í•˜ì„¸ìš”.',
          strengths: [],
          weaknesses: [],
          hiddenTalents: [],
          detailedAnalysis: ''
        },
        loveReading: combined.loveReading ?? {
          currentStatus: '-',
          loveStyle: '-',
          idealPartner: '-',
          marriageProspect: '-',
          timing: '-',
          advice: '-',
          score: 70
        },
        careerReading: combined.careerReading ?? {
          naturalTalents: [],
          suitableCareers: [],
          workStyle: '-',
          leadershipPotential: '-',
          businessAbility: '-',
          careerAdvice: '-',
          score: 70
        },
        wealthReading: combined.wealthReading ?? {
          moneyMakingAbility: '-',
          savingTendency: '-',
          investmentStyle: '-',
          luckyFields: [],
          financialAdvice: '-',
          wealthPotential: '-',
          score: 70
        },
        healthReading: combined.healthReading ?? {
          strongPoints: [],
          concernAreas: [],
          stressManagement: '-',
          recommendations: [],
          score: 70
        },
        lifePath: combined.lifePath ?? {
          earlyLife: '-',
          middleLife: '-',
          laterLife: '-',
          majorTurningPoints: [],
          lifeTheme: '-'
        },
        advice: combined.advice ?? {
          immediate: '-',
          shortTerm: '-',
          longTerm: '-',
          warnings: [],
          affirmation: 'ë‚˜ëŠ” ë¬´í•œí•œ ê°€ëŠ¥ì„±ì„ ê°€ì§€ê³  ìˆìŠµë‹ˆë‹¤.'
        },
        luckyElements: combined.luckyElements ?? {
          colors: [],
          numbers: [],
          directions: [],
          stones: [],
          days: []
        },
        overallScore: combined.overallScore ?? 70,
        specialNotes: combined.specialNotes ?? ''
      };

      return NextResponse.json({ analysis, interpretation });
    }

    return NextResponse.json({ error: 'ì˜ëª»ëœ ìš”ì²­ì…ë‹ˆë‹¤.' }, { status: 400 });

  } catch (error: any) {
    console.error('API Error:', error);
    return NextResponse.json(
      { error: error.message || 'ì„œë²„ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.' },
      { status: 500 }
    );
  }
}
